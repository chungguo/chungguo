---
title: 'CSS 变换背后的线性变换原理'
date: '2020-03-26 18:29:00'
coverImage: 'https://i.loli.net/2021/03/13/eF86JpDNhydEa7x.png'
excerpt: ''
mathjax: true
---

# 前言

CSS 的 transform 属性允许开发者无需借助 SVG、Canvas、Javascript 等方式，仅仅通过 CSS 便能以尽可能简单的方式实现对指定标签元素的旋转（rotate）、缩放（scale）、倾斜（skew）、平移（translate）等操作，大大丰富了前端页面布局及动画效果的可能性。但更深层次而言，在这些直观易懂的属性背后却是更为高阶的 matrix 属性发挥着作用。如果能够正确理解 matrix 属性及其背后的线性变换原理，那么再回头看 matrix 属性时，便会有拨开云雾见青天的快感。


<img src="https://i.loli.net/2020/05/16/vUrwnIYM1T7Qqdg.png" width="400px" alt="图1. transform 示例" />

# 我们为什么需要理解 matrix 属性
## 形式简洁
在我们的实际使用场景中，对目标对象的变换往往不是单一的，即一次变换通常是旋转、缩放、平移等变换的多次组合。例如，在一次 2D 平面的变换中，先水平和垂直方向各平移 100px，然后水平方向缩放 2 倍，垂直方向缩放 4 倍，那么常用的实现方式如下所示：

```css
div {
  transform: translate(100px, 100px) scale(2, 4)
}
```

使用以上这种表示方法，固然十分清晰的描述了整个**变换过程**，但当我们的变换需要完成十次八次乃至更多次类似的基础变换才能完成时，如此书写便会略显冗长。同时，变换的书写顺序也至关重要，相同的两次变换，相反的顺序，结果也有可能千差万别。此时，如果使用 matrix 属性描述相同的变换组合，形式上便会显得更加简洁。当然，这是以牺牲可读性为代价。

```css
div {
  transform: matrix(2, 0, 0, 4, 100, 100); 
}
```

如上所示，如果简单从形式上看，matrix 属性隐藏了变换的细节，更加强调了最终的**变换结果**。关于表述形式上的差异，我们可以拿 css 中字体颜色的设置做类比。同样是将字体颜色设置为白色，我们经常使用的有十六进制表示法和 RGB 表示法，两者的最终结果是一致，但 RGB 表示法更加 Human Friendly，可以很清晰的看出 RGB 分量值。相对的，十六进制表示法则更加 Machine Friendly。matrix 属性便是 transform 诸多属性中 「Machine Friendly」 的那一个。

```css

/* 十六进制表示法 */
h1 {
  color: #FFFFFF;
}
/* RGB表示法 */
h2 {
  color: rgb(255, 255, 255);
}

```

## JavaScript 解析计算

目前，在所有支持 CSS transform 属性的的浏览器中，当我们使用 window.getComputedStyle 方法获取元素所有最终应用的 CSS 属性值时，细心的你肯定早已发现，所有的 translate、rotate、skew 都被解析成了 matrix 属性。例如，xscroll 模拟滚动实现方案的原理便是使用了 transform 的 translate 属性，浏览器会将其转换成等价的 matrix 属性。如果不理解 matrix 属性，那么获取从 computedStyle 中获取当前滚动值就会比较困难。

![图2. translate 最终会被转化为 matrix](https://i.loli.net/2020/05/16/RZPmDTdExiCrAJ2.png)

## 矩阵变换实现图形变换
如果说从上述两个角度解释为什么我们需要理解看似复杂的 matrix 属性是站在更加上层的应用层角度做出的解释。那么从更根本的层面上而言，是因为计算机对图形图像的处理过程，需要用到各种各样的几何变换，而这些变换基本都是由平移、缩放、旋转等基本变换组合而来（其实，这也解释了为什么 css transform 提供了 translate、rotate、scale、skew 等属性，因为这些属性恰恰正是这些基础变换的语法糖）。对于一个指定空间中的指定图形图像，为了便于精确描述，通常会将其放入一个坐标系统中，这样图形图像上的每一个点都有一个唯一的坐标。对图形图像的变换实际就是图形图像上的每一个点进行坐标变换，如果使用传统的解析几何描述这些坐标变换，计算会变得非常复杂，显然不符合「大道至简」自然法则。矩阵的出现则在形式上更加简洁优美，同时将各种变换通过矩阵乘法运算进行了语言表达的统一，具体而言，二维平面内 css transform 基础变换均可以统一为如下所示的三行三列的矩阵乘法：

![图3. rotate、skew、scale、translate 变换的 matrix 表示法，将所有变换统一为了矩阵的乘法运算](https://i.loli.net/2020/05/16/x9UwOPuegRCXvSW.png)


从上列各式，我们引入了矩阵的简单概念及形式，但因**矩阵本质上描述的是向量空间（线性空间）中的线性变换**。所以，了解矩阵之前，首先需要了解什么是向量、向量空间以及什么是线性变换。

# 向量与向量空间
向量是一个同时具有大小和方向，且满足平行四边形法则的几何对象，我们高中物理力学及解析几何中称之为矢量。更形象而言，从物理学的角度来看，我们习惯于使用一个有方向的箭头表示，且物理中的向量是可以随意移动的，只要向量的大小和方向不变，无论如何移动，均为同一向量，如图：

![图4. 向量表示](https://i.loli.net/2020/05/16/dFCuq8x5njaYeBw.png)

而站在数字化的计算机角度，向量则表示的是一有序的列表，类似数组。因数学是高度抽象的，所以从数学的角度出发，只要满足一定的规则，向量可以是一个具体的函数，也可以是经抽象后更一般的向量概念，使用向量符号，如$\vec v$

而所谓空间，我们最熟悉的莫过于每天生活的这个三维空间（牛顿绝对时空观）。在这个空间中，有草木虫鱼，有人及人类活动，有位置坐标，以及看不见摸不着的空间中每个个体之间的联系，且这个三维空间中的一切在指定参考系下，都按照一定的自然规律运转。所以类似的，对于向量空间，也称线性空间，我们可以这样简单的类比理解：向量空间中的任何一个对象，在数学上通过选取基（参考系）和坐标的办法，都可以表达为向量的形式，而可加性和数乘性是这个空间的「自然规律」，线性变换便是发生在向量空间中符合「自然规律」的「运动」。

# 线性变换
线性空间（向量空间）中对象的「运动」被称作线性变换。换言之，线性空间中的任意一点的运动都可以用线性变换来完成，而点汇聚成线，线展开成面，面旋转成体。从而，我们可以说线性变换描述了线性空间中对象的变换，进而实现图形图像的变换操作。

## 线性

「线性」直观印象可能就是一条直线，对于如何描述直线，我们初中就学过——一次函数，不失一般性，形如：$y = kx + b$。其中$k$，$b$是常数且 $k \neq 0$ 。但是，从代数层面上而言，线性要满足以下两条性质。

1. **可加性**：$f(x_{1} + x_{2}) = f(x_{1}) + f(x_{2})$，即自变量单独作用的结果与自变量共同作用的结果相同。
2. **数乘性**：$f(ax) = af(x)$，其中$a$为常数。即因变量与自变量等比例变化。

**可加性和数乘性是线性变换的基础，因为矩阵加法、矩阵数乘运算基本构成了线性变换的全部，所以理解可加性和数乘性至关重要。**

如果同时满足可加性与数乘性（比例性），我们就认为是线性的。所以从代数层面上看$ y= kx + b$并不是严格的线性函数，因为如果
$$ f(x) = kx + b $$
则：
$$f(x_{1} + x_{2}) = k(x_{1} + x_{2}) + b $$
$$f(x_{1}) + f(x_{2}) = k(x_{1} + x_{2}) + 2b $$

显然，当$b \neq 0$时，$f(x_1 + x_2) \neq f(x_1) + f(x_2) $，不满足可加性。再看数乘性：

$$ f(ax) = akx + b $$
$$ af(x) = a(kx + b) = akx + ab $$

显然，当$ a \neq 1$ 时，不满足数乘性。故而，正比例函数 $ y= kx $ 才是最简单的线性函数。

## 变换

变换（transformation）指的是空间中从一个点/元素到另一个点/元素的运动，但它不是微积分中的连续性的**运动**，而是瞬间发生的变化。以我们熟知的函数做类比，函数接收一个输入，得到一个输出。类似的，变换亦如此。之所以没有使用「函数」的概念，也许正是想让我们抛开代数式的理解方式，以运动的眼光看变换。

![图5. 变换](https://i.loli.net/2020/05/16/hfz4xE9yU7KR8vj.png)

至此，一言以蔽之，**向量是线性空间的基本元素，所有满足可加性与数乘性的向量集合构成了向量空间，我们用向量坐标表示矩阵，通过矩阵运算描述线性变换。**

# 矩阵

从数学定义而言，矩阵是一系列复数或者实数的集合，最早是由方程组的系数和常数项构造而来。

$$ \begin{cases} x+y+z = 6 \\\\ 0x + 2y+5z = -4 \\\\ 2x + 5y - z = 27  \end{cases} \Rightarrow \begin{bmatrix} 1 & 1 & 1 \\\\ 0 &  2  & 5 \\\\ 2 & 5  & -1 \end{bmatrix} \begin{bmatrix}  x  \\\\  y  \\\\  z \end{bmatrix} = \begin{bmatrix} 6  \\\\ -4  \\\\ 27 \end{bmatrix}$$


既然有了$x, y, z$的出现，那么从代数未知数$x, y, z$到三维几何空间中某一个点的坐标$(x, y, z)$的联想便显得非常自然而然。在线性代数中，所有的向量必须从坐标原点出发，那么向量的终点坐标$(x, y)$便唯一确定了该向量，为了与坐标表示做区分，向量使用$ \begin{bmatrix} x \\\\ y \end{bmatrix} $表示。那么从矩阵的角度看上述方程组，就相当于在问：空间中的一向量$ \begin{bmatrix} x  \\\\ y  \\\\ z \end{bmatrix}$ 经矩阵$\begin{bmatrix} 1 & 1 & 1 \\\\ 0 &  2  & 5 \\\\ 2 & 5  & -1 \\\\ \end{bmatrix}$变换后，转换为了向量$ \begin{bmatrix} 6  \\\\ -4  \\\\ 27  \\\\ \end{bmatrix}$，求该向量。先不论该问题到底如何求解，但由此，我们至少说明了矩阵是如何描述向量空间中的线性变换——矩阵乘法。又如，对于空间中向量$\begin{bmatrix} x  \\\\ y  \\\\ z \end{bmatrix}$先进行$A$变换，再进行$B$变换，我们可以表示为<svg xmlns="http://www.w3.org/2000/svg" width="28.448ex" height="11.885ex" role="img" focusable="false" viewBox="0 -2150 12574 5253.3" aria-hidden="true" style="vertical-align: -7.021ex;" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="math" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="munder" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="TeXAtom" data-mjx-texclass="OP" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="munder" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mrow" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mo" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A1" d="M319 -645V1154H666V1070H403V-645H319Z" transform="translate(0, 996)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="23A3" d="M319 -644V1155H403V-560H666V-644H319Z" transform="translate(0, -1006)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><svg width="667" height="402" y="49" x="0" viewBox="0 100.5 667 402" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A2" d="M319 0V602H403V0H319Z" transform="scale(1, 1.002)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></svg></g><g data-mml-node="mtable" transform="translate(667, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtr" transform="translate(0, 1400)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtd" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(1500, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(3000, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g><g data-mml-node="mtr" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtd" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(1500, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(3000, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g><g data-mml-node="mtr" transform="translate(0, -1400)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtd" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(1500, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(3000, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g></g><g data-mml-node="mo" transform="translate(4167, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A4" d="M0 1070V1154H347V-645H263V1070H0Z" transform="translate(0, 996)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="23A6" d="M263 -560V1155H347V-644H0V-560H263Z" transform="translate(0, -1006)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><svg width="667" height="402" y="49" x="0" viewBox="0 100.5 667 402" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A5" d="M263 0V602H347V0H263Z" transform="scale(1, 1.002)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></svg></g></g><g data-mml-node="mo" transform="translate(0, -2030)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="E152" d="M-24 327L-18 333H-1Q11 333 15 333T22 329T27 322T35 308T54 284Q115 203 225 162T441 120Q454 120 457 117T460 95V60V28Q460 8 457 4T442 0Q355 0 260 36Q75 118 -16 278L-24 292V327Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="E153" d="M-10 60V95Q-10 113 -7 116T9 120Q151 120 250 171T396 284Q404 293 412 305T424 324T431 331Q433 333 451 333H468L474 327V292L466 278Q375 118 190 36Q95 0 8 0Q-5 0 -7 3T-10 24V60Z" transform="translate(4384, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><g data-c="E156" transform="translate(1967, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="E151" d="M-10 60Q-10 104 -10 111T-5 118Q-1 120 10 120Q96 120 190 84Q375 2 466 -158L474 -172V-207L468 -213H451H447Q437 -213 434 -213T428 -209T423 -202T414 -187T396 -163Q331 -82 224 -41T9 0Q-4 0 -7 3T-10 25V60Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="E150" d="M-18 -213L-24 -207V-172L-16 -158Q75 2 260 84Q334 113 415 119Q418 119 427 119T440 120Q454 120 457 117T460 98V60V25Q460 7 457 4T441 0Q308 0 193 -55T25 -205Q21 -211 18 -212T-1 -213H-18Z" transform="translate(450, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g><svg width="1717" height="720" x="350" y="-300" viewBox="429.2 -300 1717 720" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="E154" d="M-10 0V120H410V0H-10Z" transform="scale(6.439, 1)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></svg><svg width="1717" height="720" x="2767" y="-300" viewBox="429.2 -300 1717 720" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="E154" d="M-10 0V120H410V0H-10Z" transform="scale(6.439, 1)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></svg></g></g></g><g data-mml-node="TeXAtom" transform="translate(2148.7, -2980) scale(0.707)" data-mjx-texclass="ORD" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mi" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="42" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g><g data-mml-node="munder" transform="translate(4834, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="TeXAtom" data-mjx-texclass="OP" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="munder" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mrow" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mo" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A1" d="M319 -645V1154H666V1070H403V-645H319Z" transform="translate(0, 996)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="23A3" d="M319 -644V1155H403V-560H666V-644H319Z" transform="translate(0, -1006)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><svg width="667" height="402" y="49" x="0" viewBox="0 100.5 667 402" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A2" d="M319 0V602H403V0H319Z" transform="scale(1, 1.002)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></svg></g><g data-mml-node="mtable" transform="translate(667, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtr" transform="translate(0, 1400)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtd" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(1500, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(3000, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g><g data-mml-node="mtr" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtd" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(1500, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(3000, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g><g data-mml-node="mtr" transform="translate(0, -1400)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtd" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(1500, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g><g data-mml-node="mtd" transform="translate(3500, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mn" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g></g><g data-mml-node="mo" transform="translate(5167, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A4" d="M0 1070V1154H347V-645H263V1070H0Z" transform="translate(0, 996)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="23A6" d="M263 -560V1155H347V-644H0V-560H263Z" transform="translate(0, -1006)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><svg width="667" height="402" y="49" x="0" viewBox="0 100.5 667 402" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A5" d="M263 0V602H347V0H263Z" transform="scale(1, 1.002)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></svg></g></g><g data-mml-node="mo" transform="translate(0, -2030)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="E152" d="M-24 327L-18 333H-1Q11 333 15 333T22 329T27 322T35 308T54 284Q115 203 225 162T441 120Q454 120 457 117T460 95V60V28Q460 8 457 4T442 0Q355 0 260 36Q75 118 -16 278L-24 292V327Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="E153" d="M-10 60V95Q-10 113 -7 116T9 120Q151 120 250 171T396 284Q404 293 412 305T424 324T431 331Q433 333 451 333H468L474 327V292L466 278Q375 118 190 36Q95 0 8 0Q-5 0 -7 3T-10 24V60Z" transform="translate(5384, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><g data-c="E156" transform="translate(2467, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="E151" d="M-10 60Q-10 104 -10 111T-5 118Q-1 120 10 120Q96 120 190 84Q375 2 466 -158L474 -172V-207L468 -213H451H447Q437 -213 434 -213T428 -209T423 -202T414 -187T396 -163Q331 -82 224 -41T9 0Q-4 0 -7 3T-10 25V60Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="E150" d="M-18 -213L-24 -207V-172L-16 -158Q75 2 260 84Q334 113 415 119Q418 119 427 119T440 120Q454 120 457 117T460 98V60V25Q460 7 457 4T441 0Q308 0 193 -55T25 -205Q21 -211 18 -212T-1 -213H-18Z" transform="translate(450, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g><svg width="2217" height="720" x="350" y="-300" viewBox="554.3 -300 2217 720" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="E154" d="M-10 0V120H410V0H-10Z" transform="scale(8.314, 1)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></svg><svg width="2217" height="720" x="3267" y="-300" viewBox="554.3 -300 2217 720" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="E154" d="M-10 0V120H410V0H-10Z" transform="scale(8.314, 1)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></svg></g></g></g><g data-mml-node="TeXAtom" transform="translate(2651.8, -3003.3) scale(0.707)" data-mjx-texclass="ORD" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mi" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="41" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g><g data-mml-node="mrow" transform="translate(10668, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mo" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A1" d="M319 -645V1154H666V1070H403V-645H319Z" transform="translate(0, 996)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="23A3" d="M319 -644V1155H403V-560H666V-644H319Z" transform="translate(0, -1006)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><svg width="667" height="402" y="49" x="0" viewBox="0 100.5 667 402" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A2" d="M319 0V602H403V0H319Z" transform="scale(1, 1.002)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></svg></g><g data-mml-node="mtable" transform="translate(667, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtr" transform="translate(0, 1400)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtd" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mi" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="78" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g><g data-mml-node="mtr" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtd" transform="translate(41, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mi" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="79" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g><g data-mml-node="mtr" transform="translate(0, -1400)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mtd" transform="translate(53.5, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><g data-mml-node="mi" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="7A" d="M347 338Q337 338 294 349T231 360Q211 360 197 356T174 346T162 335T155 324L153 320Q150 317 138 317Q117 317 117 325Q117 330 120 339Q133 378 163 406T229 440Q241 442 246 442Q271 442 291 425T329 392T367 375Q389 375 411 408T434 441Q435 442 449 442H462Q468 436 468 434Q468 430 463 420T449 399T432 377T418 358L411 349Q368 298 275 214T160 106L148 94L163 93Q185 93 227 82T290 71Q328 71 360 90T402 140Q406 149 409 151T424 153Q443 153 443 143Q443 138 442 134Q425 72 376 31T278 -11Q252 -11 232 6T193 40T155 57Q111 57 76 -3Q70 -11 59 -11H54H41Q35 -5 35 -2Q35 13 93 84Q132 129 225 214T340 322Q352 338 347 338Z" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></g></g></g></g><g data-mml-node="mo" transform="translate(1239, 0)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A4" d="M0 1070V1154H347V-645H263V1070H0Z" transform="translate(0, 996)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><path data-c="23A6" d="M263 -560V1155H347V-644H0V-560H263Z" transform="translate(0, -1006)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path><svg width="667" height="402" y="49" x="0" viewBox="0 100.5 667 402" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"><path data-c="23A5" d="M263 0V602H347V0H263Z" transform="scale(1, 1.002)" data-darkmode-bgcolor-15895936460081="rgb(36, 36, 36)" data-darkmode-original-bgcolor-15895936460081="rgb(255, 255, 255)"></path></svg></g></g></g></g></svg>只不过形式上，变换的顺序是从右到左的，与我们常见的函数形式做类似，则形如$g(f(x))$，我们会先计算$f(x)$，然后才是$g(t)$，变换$A$则相当于函数$f$，变换$B$则相当于函数$g$。如此从形式上做对比，便更利于理解。当我们完成从代数到几何的思维转换之后，接下来我们就需要在几何中确定一组单位向量（基向量）以便于表示和理解矩阵计算。众所周知，我们定义沿着坐标轴方向，长度为单位长度的向量为该方向的单位向量（基向量），如$x$轴的基向量为$\overrightarrow{OA}$，记作$\overrightarrow{i}$，$y$轴的基向量为$\overrightarrow{OB}$，记作$\overrightarrow{j}$。那么在确定一组基向量后，由该组基向量所构成的线性空间内的所有向量均可用该组基向量的线性组合表示。由于变换是线性的，所以我们只需要知道该组基向量经线性变换后被变换到了哪里，就可以知道任何一个向量经变换后的坐标表示。

![图6. 基向量及其组合而来的其他向量](https://i.loli.net/2020/05/16/v5D2ABzaTEUQlwh.png)

那么举例而言$\overrightarrow{OC}$的坐标计算如下：

$$ \overrightarrow{OC} = 2 \overrightarrow{OA} + 2 \overrightarrow{OB} = 2 \begin{bmatrix}1  \\\\ 0 \end{bmatrix} + 2 \begin{bmatrix} 0  \\\\ 1
\end{bmatrix} = \begin{bmatrix} 2 \times 1 + 2 \times 0  \\\\ 2 \times 0 + 2 \times 1 \end{bmatrix} = \begin{bmatrix} 2 \\\\ 2 \end{bmatrix} = 2 \begin{bmatrix} 1 \\\\ 1 \end{bmatrix} $$


由上式可知，向量$\overrightarrow{OC}$可以看作是$\overrightarrow{oa}$在$X$和$Y$轴方向放大两倍之后的结果，也就是保持坐标原点位置及坐标不动，将$X$轴和$Y$轴放大为原来的 2 倍，此时与正好相等。放大后，原来的基向量$\overrightarrow{i}$与$ \overrightarrow{j} $坐标分别变为了$\begin{bmatrix} 2 \\\\ 0 \end{bmatrix}$和$\begin{bmatrix} 0 \\\\ 2 \end{bmatrix}$，这个变换过程可以用矩阵表示为$\overrightarrow{OC} =  \begin{bmatrix} 2 \\\\ 2 \end{bmatrix} = \begin{bmatrix} 2  & 0  \\\\ 0  & 2 \end{bmatrix} \begin{bmatrix} 1 \\\\ 1 \end{bmatrix}$，即向量$\overrightarrow{oa} = \begin{bmatrix} 1 \\\\ 1 \end{bmatrix}$，经过矩阵$\begin{bmatrix} 2  & 0  \\\\ 0  & 2 \end{bmatrix}$变换由原坐标$\begin{bmatrix} 1 \\\\ 1 \end{bmatrix}$变成了$\begin{bmatrix} 2 \\\\ 2 \end{bmatrix}$，变换矩阵$\begin{bmatrix} 2  & 0  \\\\ 0  & 2 \end{bmatrix}$的第一列正好为变换后$\overrightarrow{i}$的坐标，第二列则为$\overrightarrow{j}$的坐标。我们追踪基向量的变化过程,$i: \begin{bmatrix} 1  \\\\ 0 \end{bmatrix}  => \begin{bmatrix} 2  \\\\ 0 \end{bmatrix}$，$j: \begin{bmatrix} 0  \\\\ 1 \end{bmatrix}  => \begin{bmatrix} 0  \\\\ 2 \end{bmatrix}$，所以此处，由变换后$\overrightarrow{i}$和$\overrightarrow{j}$向量坐标组成的矩阵$\begin{bmatrix} 2 & 0 \\\\ 0 & 2 \end{bmatrix}$表示放大 2 倍的缩放变换矩阵。
$$ \overrightarrow{OC} = \begin{bmatrix} 2  & 0  \\\\ 0  & 2 \end{bmatrix} \begin{bmatrix} 1 \\\\ 1 \end{bmatrix} = 1 \begin{bmatrix} 2 \\\\ 0 \end{bmatrix} + 1 \begin{bmatrix} 0 \\\\ 2 \end{bmatrix} = \begin{bmatrix} 1 \times 2 + 1 \times 0  \\\\ 1 \times 0 + 1 \times 2 \end{bmatrix} = \begin{bmatrix}2 \\\\ 2 \end{bmatrix} $$

**（该计算过程非常重要，是可加性与数乘性的体现，也是其他复杂计算的基础）**

# CSS 中基础变换的 matrix 表示推导

至此，我们回过头来看，上文图 3 中的基础变换为何可以与复杂的 matrix 对应。但在此之前，首先要解释一下，为何在二维坐标中矩阵变换会需要三维坐标表示。其实，这里主要引入了齐次坐标的概念，也就是用 N+1 维来代表 N 维坐标。还记得上一节缩放矩阵的例子吗？在缩放时，我们并没有改变原点的位置，因为线性变换要求变换前后坐标原点不能发生变化，平移变化移动了原点，所以不能称之为线性变化。把现有的二维空间升纬到三维空间去看，而多出的那一维度对于二维空间而言并用不到，所以并不会有任何影响，升维之后便可以在高维度通过线性变换完成低维度的仿射变换。

![图 7 仿射变换](https://i.loli.net/2020/05/16/JxWXLiVsQ6tgPel.png)

另外，引入齐次坐标也可以统一计算形式，因为平移变化在表示上为矩阵加法，如将矩阵$\overrightarrow{OC} = \begin{bmatrix} 2  & 0 \\\\ 0   & 2 \end{bmatrix}$向右平移一个单位长度，那么其计算方法为：$\overrightarrow{OC'} = \begin{bmatrix} 2  & 0 \\\\ 0   & 2 \end{bmatrix} + \begin{bmatrix} 1  & 0 \\\\ 0   & 1 \end{bmatrix} = \begin{bmatrix} 3  & 0 \\\\ 0   & 3 \end{bmatrix}$。但缩放、旋转却为矩阵乘法，如将$\overrightarrow{OC} = \begin{bmatrix} 2 \\\\ 2 \end{bmatrix}$放大 0.5 倍，其计算方法为 $\overrightarrow{OC''} =
\begin{bmatrix} 0.5  & 0 \\\\ 0   & 0.5 \end{bmatrix} \begin{bmatrix} 2  \\\\ 2 \end{bmatrix} = \begin{bmatrix} 1 \\\\ 1 \end{bmatrix} $ 这样在一次平移与缩放同时存在的复杂变换中，就会存在矩阵加法与乘法的同时存在，因加法与乘法的计算规则不同，势必会增添计算的复杂性。齐次坐标的引入，便是为了解决该问题，将矩阵加法统一成了矩阵乘法，描述和计算上更加简洁，是一种数学之美的体现。下面，我们来看图 3 中各式的推导过程： 

![图 8 旋转变换](https://i.loli.net/2020/05/16/j8GpC3UtzlJYWKM.png)

对于旋转变换，如果进行逆时针旋转$\theta$，那么基向量的变化过程,$i: \begin{bmatrix} 1  \\\\ 0 \end{bmatrix}  => \begin{bmatrix} cos(\theta) \\\\ sin(\theta) \end{bmatrix}$，$j: \begin{bmatrix} 0  \\\\ 1 \end{bmatrix}  => \begin{bmatrix} -sin(\theta)  \\\\ cos(\theta) \end{bmatrix}$，故而对于二维平面内任意向量，其旋转矩阵用笛卡尔坐标系表示则为：$\begin{bmatrix} cos(\theta) & -sin(\theta) \\\\ sin(\theta)  & cos(\theta)\end{bmatrix} $，引入齐次坐标后，则表示为$\begin{bmatrix} cos(\theta)  & -sin(\theta) & 0 \\\\ sin(\theta)  & cos(\theta) & 0 \\\\0 & 0 & 1 \end{bmatrix}$（引入$Z$轴基向量$\begin{bmatrix} 0 \\\\ 0 \\\\ 1 \end{bmatrix}$，下同），所以对向量$\begin{bmatrix} x \\\\ y \\\\ 1\end{bmatrix}$进行旋转，矩阵可表示为$rotate(\theta) =  \begin{bmatrix} cos(\theta)  & -sin(\theta) & 0 \\\\ sin(\theta)  & cos(\theta)  & 0 \\\\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\\\ y \\\\ 1\end{bmatrix}$

对于缩放变换 (scale) 则很好理解，如果单纯对$\overrightarrow{i}$进行 $m$ 倍缩放，则的变换为$i: \begin{bmatrix} 1  \\\\ 0  \end{bmatrix}  => \begin{bmatrix} m \\\\ 0 \end{bmatrix}$，同理，当单纯对$\overrightarrow{j}$进行 $n$ 倍缩放，则的变换为$j: \begin{bmatrix} 0  \\\\ 1 \end{bmatrix}  => \begin{bmatrix} 0  \\\\ n \end{bmatrix}$，所以，缩放变换矩阵用笛卡尔坐标系表示则为：$\begin{bmatrix} m & 0 \\\\ 0 & n \end{bmatrix}$，引入齐次坐标后，则表示为$\begin{bmatrix} m & 0 & 0 \\\\ 0 & n & 0 \\\\ 0 & 0 & 1 \end{bmatrix}$。所以对向量$ \begin{bmatrix} x \\\\ y \\\\ 1 \end{bmatrix} $进行缩放，矩阵可表示为：

$$scale(m, n) = \begin{bmatrix} m & 0 & 0 \\\\ 0 & n  & 0 \\\\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\\\ y \\\\ 1 \end{bmatrix}$$

![图 9 斜切变换](https://i.loli.net/2020/05/16/bj16ZTczGPyMN3H.png)

对于斜切变换，参照示意图，我们同样不难推导出斜切变换的矩阵表示：

$$skew(\alpha, \beta) = \begin{bmatrix} 1 & tan(\alpha) & 0 \\\\ tan(\beta) & 1  & 0 \\\\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\\\ y \\\\ 1 \end{bmatrix}$$

最后，对于二维空间的平移变换，我们通过仿射变换实现，参照图 8，变换过程中$\overrightarrow{i}$，$\overrightarrow{j}$基向量并未发生改变，仅仅是$Z$轴基向量发生了改变，因此平移变换的矩阵表示为：

$$translate(m, n) = \begin{bmatrix} 1 & 0 & m \\\\ 0 & 1  & n \\\\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\\\ y \\\\ 1 \end{bmatrix}$$

至此，希望当下次看到 matrix 属性时，对你而言，其中的数字并不仅仅是一堆数字，而代表着一种具体变换

# 线性化的其他应用场景
目前火热的人脸识别技术便是通过线性化实现的。人可以很容易区分两张面容图是不是同一个人，而计算机只能将所有问题数字化，实现方案便是将人脸线性化。如果将人脸中较为重要的鼻子、眼睛、嘴巴等采样点数据通过某种算法数字化，并用坐标表示，那么当给出一张新的面容时，按照相同的方法算出当前面容图的坐标，通过结果坐标是否落在目标平面或平面附近，就可以判断是不是同一个人。


参考文献：
1. [The CSS3 matrix() Transform for the Mathematically Challenged](https://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/)
2. [CSS Transforms Module Level 1](https://www.w3.org/TR/css-transforms-1/)
2. [3Blue1Brown](https://www.youtube.com/channel/UCYO_jab_esuFRV4b17AJtAw)

